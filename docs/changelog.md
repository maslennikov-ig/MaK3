# Журнал изменений (Changelog)

## [Unreleased] - 2025-05-11

### Добавлено
- Реализован API для импорта/экспорта контактов в форматах CSV и Excel
- Добавлены эндпоинты: POST /contacts/upload-csv, GET /contacts/export-csv, GET /contacts/export-excel
- Реализована поддержка загрузки файлов с использованием multer
- Реализован API для CRUD-операций с контактами (клиентами и лидами) с учетом ролевого доступа (RBAC)
- Реализованы эндпоинты для получения списка источников и статусов контактов
- Добавлены модульные тесты для ContactsService
- Реализована новая модель Contact (единая для клиентов и лидов) с поддержкой enum-типов источника и статуса
- Обновлены связи с User, Partner, Deal для использования Contact
- Реализованы модели для комментариев, вложений и истории изменений контактов
- Проведен рефакторинг схемы Prisma для соответствия бизнес-логике CRM
- В architecture.md, project-structure.md, tasks.md добавлены правила по приоритету использования готовых библиотек, актуальных стабильных версий и отказу от устаревших зависимостей
- В architecture.md и project-structure.md формализованы практические рекомендации по архитектуре, фронтенду, бэкенду и безопасности
- В tasks.md, architecture.md, infrastructure.md добавлены правила и рекомендации по архитектурным улучшениям, современным best practices, работе с документацией (Context7) и безопасности
- Создан базовый README.md с описанием проекта, технологическим стеком и инструкциями
- Настроен базовый CI/CD пайплайн с GitHub Actions (.github/workflows/ci.yml)
- Создан файл docker-compose.yml для локальной разработки
- Создан файл .env с переменными окружения для docker-compose
- Создан пример Terraform-конфигурации для Яндекс.Облака
- Разработана Prisma схема для базы данных с моделями User, Role, Permission и другими
- Настроены ESLint и Prettier для frontend и backend
- Создана базовая структура проекта:
  - Frontend: Next.js с App Router, MaK3ntine UI
  - Backend: NestJS с модульной структурой
- Реализованы базовые компоненты для аутентификации и авторизации
- Добавлена поддержка темизации light/dark с использованием Mantine ColorSchemeProvider
- Созданы компоненты Header и Navbar для навигации
- Реализован современный интерфейс панели управления с виджетами статистики
- Добавлен переключатель тем в шапке приложения
- Реализовано выпадающее меню пользователя с быстрым доступом к профилю и настройкам

### Изменено
- Обновлен файл tasks.md с отметками о выполненных задачах
- Обновлены зависимости Prisma с версии 5.0.0 до 6.7.0 для улучшения производительности и стабильности

### Исправлено
- Заменена библиотека `xlsx` на `exceljs` для устранения уязвимостей безопасности (Prototype Pollution и ReDoS)
- Обновлены методы экспорта и импорта Excel-файлов для работы с новой библиотекой
